---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Gravatar from "../../components/Gravatar.astro";

const authors = await getCollection("author");
---

<Layout title="Authors">
  <main class="container mx-auto px-4 py-8">
    <h1 class="mb-8 text-left text-4xl font-bold">Authors</h1>
    <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
      {
        authors.map((author) => {
          return (
            <div class="card bg-base-100 compact shadow-lg">
              <div class="card-body p-4">
                <div class="flex items-center gap-3">
                  <Gravatar
                    email={author.data.email}
                    alt={`${author.data.display_name}'s profile picture`}
                    class="h-16 w-16 rounded-full"
                  />
                  <div class="flex-1">
                    <h2 class="card-title text-lg">
                      {author.data.display_name}
                    </h2>
                    <p class="text-base-content/70 line-clamp-2 text-sm">
                      {author.data.description}
                    </p>
                  </div>
                </div>
                <div class="card-actions mt-2 justify-end">
                  <a
                    href={`/author/${author.id.replace(/\.[^.]*$/, "")}`}
                    class="btn btn-primary btn-sm"
                  >
                    View Posts
                  </a>
                </div>
              </div>
            </div>
          );
        })
      }
    </div>
  </main>
</Layout>
